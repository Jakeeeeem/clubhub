
> clubhub-backend@1.0.0 test
> jest --detectOpenHandles tests/payments.test.js

  console.log
    ğŸ”Œ DB CONFIG DEBUG: {
      env_db_host: 'localhost',
      env_pghost: undefined,
      env_database_url: undefined,
      config_host: 'localhost'
    }

      at Object.log (config/database.js:4:9)

  console.log
    ğŸ”— Connection String (masked): postgresql://clubhub_dev_db_user:****@localhost:5432/clubhub_dev_db

      at Object.log (config/database.js:14:9)

  console.log
    ğŸ“§ Using SendPulse SMTP Service

      at EmailService.log [as getEmailConfig] (services/email-service.js:25:15)

  console.log
    âš ï¸  Payment processing is DISABLED. Set ENABLE_PAYMENT_PROCESSING=true in .env to enable.

      at Object.log (middleware/payment-guard.js:20:11)

  console.log
    ğŸ“ Route: *

      at log (server.js:407:13)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: /api/test-now

      at log (server.js:407:13)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: /health

      at log (server.js:407:13)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: /api/health

      at log (server.js:407:13)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: /api/public-debug/:id

      at log (server.js:407:13)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/register

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/login

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/logout

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/seed-demo-users

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/me

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/find-user

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/add-child

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/children

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/children/:childId

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/organizations

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/context

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/switch-organization

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/profile

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/profile

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/gdpr/export

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/gdpr/delete

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/forgot-password

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/reset-password

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/profile

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/change-password

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/settings

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/settings

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/account

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/switch-organization

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/context

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/me

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/organizations\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/organizations\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/organizations\/?(?=\/|$)/super/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/organizations\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/organizations\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/organizations\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/organizations\/?(?=\/|$)/:id/members

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/organizations\/?(?=\/|$)/:id/images

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/organizations\/?(?=\/|$)/:id/logo

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/organizations\/?(?=\/|$)/:id/images

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/invitations\/?(?=\/|$)/:orgId/invite

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/invitations\/?(?=\/|$)/:token

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/invitations\/?(?=\/|$)/:token/accept

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/invitations\/?(?=\/|$)/:token/decline

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/invitations\/?(?=\/|$)/:orgId/invitations

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/stats

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/organizations

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/users

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/stripe/overview

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/organization/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/organizations/:id/status

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/organizations/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/set-admin/:userId

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/activity

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/users

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/users/:userId/status

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/users/:userId

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/generate-mock-data

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/onboard-club

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/:id/public-listings

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/:id/teams

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/:id/apply

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/:id/applications

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/applications/:applicationId/review

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/:id/stats

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/:id/images

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/:id/images

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/family

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/filtered/:filter

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/scout

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/filtered/:filter

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/:id/stats

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/:id/payment-status

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/child

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/child/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/:id/history

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/:id/history

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/history/:historyId

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/:id/history

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/:id/history

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/:id/history/:historyId

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/:id/performance

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/:id/role

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/:id/schedule

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/club/:clubId

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/:id/permissions

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/:id/dashboard

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/:id/performance

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/:id/role

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/:id/schedule

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/teams\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/teams\/?(?=\/|$)/player/:userId

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/teams\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/teams\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/teams\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/teams\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/teams\/?(?=\/|$)/:id/players

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/teams\/?(?=\/|$)/:id/players/:playerId

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/teams\/?(?=\/|$)/:id/stats

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/teams\/?(?=\/|$)/:id/availability

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id/book

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/bookings/:bookingId/cancel

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id/bookings

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/bookings/my-bookings

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id/availability

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id/availability/override

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id/availability

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id/notify

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id/checkin

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id/checkins

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/config

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/stripe/connect/status

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/stripe/connect/onboard

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/stripe/connect/manage

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/health

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/plans

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/plans/import

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/plans

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/plans/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/plans/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/plan/current

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/plan/assign

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/bulk-assign-plan

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/create-intent

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/confirm-payment

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/public/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/:id/payment-link

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/book-event

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/cleanup

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/stripe-payouts\/?(?=\/|$)/configure-payout/:accountId

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/stripe-payouts\/?(?=\/|$)/payout-schedule/:accountId

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/stripe-payouts\/?(?=\/|$)/configure-all-payouts

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/stripe-payouts\/?(?=\/|$)/manual-payout/:accountId

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/dashboard\/?(?=\/|$)/admin

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/dashboard\/?(?=\/|$)/player

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/dashboard\/?(?=\/|$)/invitations/:orgId/accept

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/dashboard\/?(?=\/|$)/invitations/:orgId/decline

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/invites\/?(?=\/|$)/generate

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/invites\/?(?=\/|$)/details/:token

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/invites\/?(?=\/|$)/accept/:token

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/invites\/?(?=\/|$)/decline/:token

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/invites\/?(?=\/|$)/sent

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/products\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/products\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/products\/?(?=\/|$)/purchase

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/products\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/products\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/campaigns\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/campaigns\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/campaigns\/?(?=\/|$)/:id/send

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/listings\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/listings\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/listings\/?(?=\/|$)/:id/applications

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/listings\/?(?=\/|$)/applications/:id/status

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/listings\/?(?=\/|$)/applications/:id/invite

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/listings\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/notifications\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/notifications\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/notifications\/?(?=\/|$)/:id/read

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/notifications\/?(?=\/|$)/read-all

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/debug\/?(?=\/|$)/check-org/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/talent-id\/?(?=\/|$)/register

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/talent-id\/?(?=\/|$)/events/:id/dashboard

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/talent-id\/?(?=\/|$)/events/:id/schedule

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/talent-id\/?(?=\/|$)/bibs/batch

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/talent-id\/?(?=\/|$)/events/:id/groups

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/talent-id\/?(?=\/|$)/events/:id/auto-assign

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/talent-id\/?(?=\/|$)/registrations/:id/checkin

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/venues\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/venues\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/venues\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/venues\/?(?=\/|$)/:id/availability

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/venues\/?(?=\/|$)/:id/documents

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/venues\/?(?=\/|$)/:id/book

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/venues\/?(?=\/|$)/bookings/my

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/venues\/?(?=\/|$)/bookings/:id/status

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/leagues\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/leagues\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/leagues\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/leagues\/?(?=\/|$)/:id/standings

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/leagues\/?(?=\/|$)/:id/teams

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/leagues\/?(?=\/|$)/:id/fixtures/generate

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/leagues\/?(?=\/|$)/:id/fixtures

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/leagues\/?(?=\/|$)/fixtures/:id/score

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/leagues\/?(?=\/|$)/fixtures/:id/assign-referee

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/polls\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/polls\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/polls\/?(?=\/|$)/:id/vote

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/email\/?(?=\/|$)/send

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/email\/?(?=\/|$)/send-invite

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    2026-02-09T21:06:14.906Z - POST /api/auth/register - ::ffff:127.0.0.1

      at log (server.js:186:11)

  console.error
    âŒ Query failed: {
      text: 'SELECT * FROM users WHERE email = $1...',
      error: 'password authentication failed for user "clubhub_dev_db_user"'
    }

    [0m [90m 81 |[39m     [36mreturn[39m res[33m;[39m
     [90m 82 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 83 |[39m     console[33m.[39merror([32m"âŒ Query failed:"[39m[33m,[39m {
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 84 |[39m       text[33m:[39m text[33m.[39msubstring([35m0[39m[33m,[39m [35m50[39m) [33m+[39m [32m"..."[39m[33m,[39m
     [90m 85 |[39m       error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 86 |[39m     })[33m;[39m[0m

      at error (config/database.js:83:13)
      at routes/auth.js:167:26

  console.error
    âŒ Registration error: error: password authentication failed for user "clubhub_dev_db_user"
        at C:\Users\Dell\Documents\elitepro\clubhub\backend\node_modules\pg-pool\index.js:45:11
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at query (C:\Users\Dell\Documents\elitepro\clubhub\backend\config\database.js:74:17)
        at C:\Users\Dell\Documents\elitepro\clubhub\backend\routes\auth.js:167:26 {
      length: 115,
      severity: 'FATAL',
      code: '28P01',
      detail: undefined,
      hint: undefined,
      position: undefined,
      internalPosition: undefined,
      internalQuery: undefined,
      where: undefined,
      schema: undefined,
      table: undefined,
      column: undefined,
      dataType: undefined,
      constraint: undefined,
      file: 'auth.c',
      line: '320',
      routine: 'auth_failed'
    }

    [0m [90m 320 |[39m     })[33m;[39m
     [90m 321 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 322 |[39m     console[33m.[39merror([32m"âŒ Registration error:"[39m[33m,[39m error)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 323 |[39m     console[33m.[39merror([32m"Error details:"[39m[33m,[39m {
     [90m 324 |[39m       message[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 325 |[39m       code[33m:[39m error[33m.[39mcode[33m,[39m[0m

      at error (routes/auth.js:322:13)

  console.error
    Error details: {
      message: 'password authentication failed for user "clubhub_dev_db_user"',
      code: '28P01',
      detail: undefined,
      table: undefined,
      column: undefined
    }

    [0m [90m 321 |[39m   } [36mcatch[39m (error) {
     [90m 322 |[39m     console[33m.[39merror([32m"âŒ Registration error:"[39m[33m,[39m error)[33m;[39m
    [31m[1m>[22m[39m[90m 323 |[39m     console[33m.[39merror([32m"Error details:"[39m[33m,[39m {
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 324 |[39m       message[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 325 |[39m       code[33m:[39m error[33m.[39mcode[33m,[39m
     [90m 326 |[39m       detail[33m:[39m error[33m.[39mdetail[33m,[39m[0m

      at error (routes/auth.js:323:13)

  console.log
    2026-02-09T21:06:15.018Z - GET /api/payments/health - ::ffff:127.0.0.1

      at log (server.js:186:11)

  console.log
    âœ… Stripe is configured and active.

      at Object.log (tests/payments.test.js:85:15)

  console.log
    2026-02-09T21:06:15.032Z - GET /api/payments/health - ::ffff:127.0.0.1

      at log (server.js:186:11)

  console.log
    2026-02-09T21:06:15.046Z - POST /api/payments/plans - ::ffff:127.0.0.1

      at log (server.js:186:11)

  console.error
    âŒ Token verification failed: {
      error: 'jwt malformed',
      name: 'JsonWebTokenError',
      token: 'undefined...'
    }

    [0m [90m 28 |[39m   jwt[33m.[39mverify(token[33m,[39m [33mJWT_SECRET[39m[33m,[39m (err[33m,[39m decoded) [33m=>[39m {
     [90m 29 |[39m     [36mif[39m (err) {
    [31m[1m>[22m[39m[90m 30 |[39m       console[33m.[39merror([32m"âŒ Token verification failed:"[39m[33m,[39m {
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 31 |[39m         error[33m:[39m err[33m.[39mmessage[33m,[39m
     [90m 32 |[39m         name[33m:[39m err[33m.[39mname[33m,[39m
     [90m 33 |[39m         token[33m:[39m token[33m.[39msubstring([35m0[39m[33m,[39m [35m20[39m) [33m+[39m [32m"..."[39m[33m,[39m[0m

      at error (middleware/auth.js:30:15)
      at Object.module.exports [as verify] (node_modules/jsonwebtoken/verify.js:70:12)
      at verify (middleware/auth.js:28:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at next (server.js:187:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at jsonParser (node_modules/body-parser/lib/types/json.js:104:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express-rate-limit/dist/index.cjs:822:7
      at node_modules/express-rate-limit/dist/index.cjs:704:5

  console.log
    2026-02-09T21:06:15.070Z - GET /api/payments/plans - ::ffff:127.0.0.1

      at log (server.js:186:11)

  console.error
    âŒ Query failed: {
      text: '\n      CREATE TABLE IF NOT EXISTS plans (\n        ...',
      error: 'password authentication failed for user "clubhub_dev_db_user"'
    }

    [0m [90m 81 |[39m     [36mreturn[39m res[33m;[39m
     [90m 82 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 83 |[39m     console[33m.[39merror([32m"âŒ Query failed:"[39m[33m,[39m {
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 84 |[39m       text[33m:[39m text[33m.[39msubstring([35m0[39m[33m,[39m [35m50[39m) [33m+[39m [32m"..."[39m[33m,[39m
     [90m 85 |[39m       error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 86 |[39m     })[33m;[39m[0m

      at error (config/database.js:83:13)
      at routes/payments.js:304:5

  console.error
    Get plans error: error: password authentication failed for user "clubhub_dev_db_user"
        at C:\Users\Dell\Documents\elitepro\clubhub\backend\node_modules\pg-pool\index.js:45:11
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at query (C:\Users\Dell\Documents\elitepro\clubhub\backend\config\database.js:74:17)
        at C:\Users\Dell\Documents\elitepro\clubhub\backend\routes\payments.js:304:5 {
      length: 115,
      severity: 'FATAL',
      code: '28P01',
      detail: undefined,
      hint: undefined,
      position: undefined,
      internalPosition: undefined,
      internalQuery: undefined,
      where: undefined,
      schema: undefined,
      table: undefined,
      column: undefined,
      dataType: undefined,
      constraint: undefined,
      file: 'auth.c',
      line: '320',
      routine: 'auth_failed'
    }

    [0m [90m 339 |[39m     res[33m.[39mjson(result[33m.[39mrows)[33m;[39m
     [90m 340 |[39m   } [36mcatch[39m (err) {
    [31m[1m>[22m[39m[90m 341 |[39m     console[33m.[39merror([32m"Get plans error:"[39m[33m,[39m err)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 342 |[39m     res[33m.[39mstatus([35m500[39m)[33m.[39mjson({
     [90m 343 |[39m       error[33m:[39m [32m"Failed to load plans"[39m[33m,[39m
     [90m 344 |[39m       message[33m:[39m err[33m.[39mmessage[33m,[39m[0m

      at error (routes/payments.js:341:13)

FAIL tests/payments.test.js
  â— Payments API Integration Tests â€º should register a user and create an organization

    expect(received).toEqual(expected) // deep equality

    Expected: 201
    Received: 500

    [0m [90m 62 |[39m       })[33m;[39m
     [90m 63 |[39m
    [31m[1m>[22m[39m[90m 64 |[39m     expect(res[33m.[39mstatusCode)[33m.[39mtoEqual([35m201[39m)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 65 |[39m     authToken [33m=[39m res[33m.[39mbody[33m.[39mtoken[33m;[39m
     [90m 66 |[39m     expect(authToken)[33m.[39mtoBeDefined()[33m;[39m
     [90m 67 |[39m[0m

      at Object.toEqual (tests/payments.test.js:64:28)

  â— Payments API Integration Tests â€º should create a payment plan

    expect(received).toEqual(expected) // deep equality

    Expected: 201
    Received: 403

    [0m [90m 118 |[39m       )[33m;[39m
     [90m 119 |[39m     } [36melse[39m {
    [31m[1m>[22m[39m[90m 120 |[39m       expect(res[33m.[39mstatusCode)[33m.[39mtoEqual([35m201[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 121 |[39m       expect(res[33m.[39mbody[33m.[39mplan)[33m.[39mtoHaveProperty([32m"name"[39m[33m,[39m [32m"Test Annual Membership"[39m)[33m;[39m
     [90m 122 |[39m       console[33m.[39mlog([32m"âœ… Plan created successfully in Stripe."[39m)[33m;[39m
     [90m 123 |[39m     }[0m

      at Object.toEqual (tests/payments.test.js:120:30)

  â— Payments API Integration Tests â€º should fetch plans

    expect(received).toEqual(expected) // deep equality

    Expected: 200
    Received: 500

    [0m [90m 130 |[39m       [33m.[39m[36mset[39m([32m"Authorization"[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m [90m// Authentication might be optional depending on implementation[39m
     [90m 131 |[39m
    [31m[1m>[22m[39m[90m 132 |[39m     expect(res[33m.[39mstatusCode)[33m.[39mtoEqual([35m200[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 133 |[39m     expect([33mArray[39m[33m.[39misArray(res[33m.[39mbody))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 134 |[39m   })[33m;[39m
     [90m 135 |[39m })[33m;[39m[0m

      at Object.toEqual (tests/payments.test.js:132:28)


  â— Test suite failed to run

    error: password authentication failed for user "clubhub_dev_db_user"

    [0m [90m 38 |[39m     }
     [90m 39 |[39m     [36mif[39m (createdUserEmail) {
    [31m[1m>[22m[39m[90m 40 |[39m       [36mawait[39m pool[33m.[39mquery([32m"DELETE FROM users WHERE email = $1"[39m[33m,[39m [
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 41 |[39m         createdUserEmail[33m,[39m
     [90m 42 |[39m       ])[33m;[39m
     [90m 43 |[39m     }[0m

      at node_modules/pg-pool/index.js:45:11
      at Object.<anonymous> (tests/payments.test.js:40:7)

Test Suites: 1 failed, 1 total
Tests:       3 failed, 1 passed, 4 total
Snapshots:   0 total
Time:        1.54 s, estimated 3 s
Ran all test suites matching tests/payments.test.js.
