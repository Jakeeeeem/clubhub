
> clubhub-backend@1.0.0 test
> jest --detectOpenHandles tests/stripe-connect-safety.test.js

  console.log
    ğŸ“§ Using SendPulse SMTP Service

      at EmailService.log [as getEmailConfig] (services/email-service.js:25:15)

  console.log
    ğŸ“ Route: *

      at log (server.js:407:13)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: /api/test-now

      at log (server.js:407:13)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: /health

      at log (server.js:407:13)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: /api/health

      at log (server.js:407:13)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: /api/public-debug/:id

      at log (server.js:407:13)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/register

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/login

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/logout

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/seed-demo-users

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/me

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/find-user

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/add-child

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/children

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/children/:childId

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/organizations

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/context

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/switch-organization

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/profile

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/profile

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/gdpr/export

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/gdpr/delete

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/forgot-password

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/reset-password

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/profile

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/change-password

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/settings

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/settings

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/account

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/switch-organization

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/context

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/auth\/?(?=\/|$)/me

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/organizations\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/organizations\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/organizations\/?(?=\/|$)/super/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/organizations\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/organizations\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/organizations\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/organizations\/?(?=\/|$)/:id/members

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/organizations\/?(?=\/|$)/:id/images

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/organizations\/?(?=\/|$)/:id/logo

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/organizations\/?(?=\/|$)/:id/images

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/invitations\/?(?=\/|$)/:orgId/invite

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/invitations\/?(?=\/|$)/:token

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/invitations\/?(?=\/|$)/:token/accept

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/invitations\/?(?=\/|$)/:token/decline

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/invitations\/?(?=\/|$)/:orgId/invitations

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/stats

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/organizations

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/users

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/stripe/overview

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/organization/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/organizations/:id/status

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/organizations/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/set-admin/:userId

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/activity

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/users

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/users/:userId/status

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/users/:userId

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/generate-mock-data

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/platform-admin\/?(?=\/|$)/onboard-club

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/:id/public-listings

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/:id/teams

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/:id/apply

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/:id/applications

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/applications/:applicationId/review

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/:id/stats

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/:id/images

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/clubs\/?(?=\/|$)/:id/images

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/family

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/filtered/:filter

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/scout

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/filtered/:filter

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/:id/stats

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/:id/payment-status

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/child

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/child/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/:id/history

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/:id/history

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/history/:historyId

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/:id/history

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/:id/history

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/players\/?(?=\/|$)/:id/history/:historyId

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/:id/performance

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/:id/role

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/:id/schedule

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/club/:clubId

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/:id/permissions

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/:id/dashboard

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/:id/performance

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/:id/role

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/staff\/?(?=\/|$)/:id/schedule

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/teams\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/teams\/?(?=\/|$)/player/:userId

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/teams\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/teams\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/teams\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/teams\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/teams\/?(?=\/|$)/:id/players

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/teams\/?(?=\/|$)/:id/players/:playerId

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/teams\/?(?=\/|$)/:id/stats

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/teams\/?(?=\/|$)/:id/availability

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id/book

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/bookings/:bookingId/cancel

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id/bookings

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/bookings/my-bookings

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id/availability

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id/availability/override

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id/availability

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id/notify

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id/checkin

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/events\/?(?=\/|$)/:id/checkins

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/config

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/stripe/connect/status

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/stripe/connect/onboard

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/stripe/connect/manage

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/health

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/plans

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/plans/import

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/plans

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/plans/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/plans/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/plan/current

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/plan/assign

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/bulk-assign-plan

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/create-intent

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/confirm-payment

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/public/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/:id/payment-link

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/book-event

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/payments\/?(?=\/|$)/cleanup

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/stripe-payouts\/?(?=\/|$)/configure-payout/:accountId

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/stripe-payouts\/?(?=\/|$)/payout-schedule/:accountId

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/stripe-payouts\/?(?=\/|$)/configure-all-payouts

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/stripe-payouts\/?(?=\/|$)/manual-payout/:accountId

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/dashboard\/?(?=\/|$)/admin

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/dashboard\/?(?=\/|$)/player

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/dashboard\/?(?=\/|$)/invitations/:orgId/accept

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/dashboard\/?(?=\/|$)/invitations/:orgId/decline

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/invites\/?(?=\/|$)/generate

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/invites\/?(?=\/|$)/details/:token

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/invites\/?(?=\/|$)/accept/:token

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/invites\/?(?=\/|$)/decline/:token

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/invites\/?(?=\/|$)/sent

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/products\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/products\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/products\/?(?=\/|$)/purchase

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/products\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/products\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/campaigns\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/campaigns\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/campaigns\/?(?=\/|$)/:id/send

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/listings\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/listings\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/listings\/?(?=\/|$)/:id/applications

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/listings\/?(?=\/|$)/applications/:id/status

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/listings\/?(?=\/|$)/applications/:id/invite

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/listings\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/notifications\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/notifications\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/notifications\/?(?=\/|$)/:id/read

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/notifications\/?(?=\/|$)/read-all

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/debug\/?(?=\/|$)/check-org/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/talent-id\/?(?=\/|$)/register

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/talent-id\/?(?=\/|$)/events/:id/dashboard

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/talent-id\/?(?=\/|$)/events/:id/schedule

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/talent-id\/?(?=\/|$)/bibs/batch

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/talent-id\/?(?=\/|$)/events/:id/groups

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/talent-id\/?(?=\/|$)/events/:id/auto-assign

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/talent-id\/?(?=\/|$)/registrations/:id/checkin

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/venues\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/venues\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/venues\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/venues\/?(?=\/|$)/:id/availability

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/venues\/?(?=\/|$)/:id/documents

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/venues\/?(?=\/|$)/:id/book

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/venues\/?(?=\/|$)/bookings/my

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/venues\/?(?=\/|$)/bookings/:id/status

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/leagues\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/leagues\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/leagues\/?(?=\/|$)/:id

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/leagues\/?(?=\/|$)/:id/standings

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/leagues\/?(?=\/|$)/:id/teams

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/leagues\/?(?=\/|$)/:id/fixtures/generate

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/leagues\/?(?=\/|$)/:id/fixtures

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/leagues\/?(?=\/|$)/fixtures/:id/score

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/leagues\/?(?=\/|$)/fixtures/:id/assign-referee

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/polls\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/polls\/?(?=\/|$)/

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/polls\/?(?=\/|$)/:id/vote

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/email\/?(?=\/|$)/send

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    ğŸ“ Route: ^\/api\/email\/?(?=\/|$)/send-invite

      at log (server.js:411:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

  console.log
    2026-02-09T21:04:45.061Z - GET /api/payments/stripe/connect/status - ::ffff:127.0.0.1

      at log (server.js:186:11)

  console.log
    âœ… Token verified for user: super@test.com

      at log (middleware/auth.js:56:13)

  console.error
    Stripe Connect account error: Error: User not found
        at getOrCreateStripeConnectAccount (C:\Users\Dell\Documents\elitepro\clubhub\backend\routes\payments.js:52:45)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at C:\Users\Dell\Documents\elitepro\clubhub\backend\routes\payments.js:130:21

    [0m [90m 110 |[39m     [36mreturn[39m account[33m;[39m
     [90m 111 |[39m   } [36mcatch[39m (err) {
    [31m[1m>[22m[39m[90m 112 |[39m     console[33m.[39merror([32m"Stripe Connect account error:"[39m[33m,[39m err)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 113 |[39m
     [90m 114 |[39m     [90m// Handle specific Stripe errors[39m
     [90m 115 |[39m     [36mif[39m (err[33m.[39mtype [33m===[39m [32m"StripeInvalidRequestError"[39m) {[0m

      at error (routes/payments.js:112:13)
      at routes/payments.js:130:21

  console.error
    Stripe connect status error: Error: User not found
        at getOrCreateStripeConnectAccount (C:\Users\Dell\Documents\elitepro\clubhub\backend\routes\payments.js:52:45)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at C:\Users\Dell\Documents\elitepro\clubhub\backend\routes\payments.js:130:21

    [0m [90m 208 |[39m     res[33m.[39mjson(response)[33m;[39m
     [90m 209 |[39m   } [36mcatch[39m (err) {
    [31m[1m>[22m[39m[90m 210 |[39m     console[33m.[39merror([32m"Stripe connect status error:"[39m[33m,[39m err)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 211 |[39m     [36mif[39m ([33mString[39m(err[33m.[39mmessage)[33m.[39mincludes([32m"User not found"[39m)) {
     [90m 212 |[39m       [36mreturn[39m res[33m.[39mstatus([35m404[39m)[33m.[39mjson({ error[33m:[39m [32m"User not found"[39m })[33m;[39m
     [90m 213 |[39m     }[0m

      at error (routes/payments.js:210:13)

  console.log
    2026-02-09T21:04:45.160Z - POST /api/payments/create-intent - ::ffff:127.0.0.1

      at log (server.js:186:11)

  console.log
    Creating payment intent with data: { amount: 100 }

      at log (routes/payments.js:1088:13)

  console.log
    Creating Stripe PaymentIntent with data: {
      amount: 10000,
      currency: 'gbp',
      description: 'ClubHub Payment of Â£100'
    }

      at log (routes/payments.js:1205:15)

  console.log
    Stripe Payment Intent created: pi_test for Â£100

      at log (routes/payments.js:1214:15)

  console.log
    2026-02-09T21:04:45.179Z - POST /api/payments/plans - ::ffff:127.0.0.1

      at log (server.js:186:11)

  console.log
    âœ… Token verified for user: super@test.com

      at log (middleware/auth.js:56:13)

  console.log
    2026-02-09T21:04:45.201Z - POST /api/payments/create-intent - ::ffff:127.0.0.1

      at log (server.js:186:11)

  console.log
    Creating payment intent with data: { amount: 50, paymentId: 'test-payment-123' }

      at log (routes/payments.js:1088:13)

  console.warn
    Payment record not found for ID: test-payment-123

    [0m [90m 1161 |[39m           }
     [90m 1162 |[39m         } [36melse[39m {
    [31m[1m>[22m[39m[90m 1163 |[39m           console[33m.[39mwarn([32m`Payment record not found for ID: ${paymentId}`[39m)[33m;[39m
     [90m      |[39m                   [31m[1m^[22m[39m
     [90m 1164 |[39m         }
     [90m 1165 |[39m       } [36mcatch[39m (dbError) {
     [90m 1166 |[39m         console[33m.[39merror([32m"Database error fetching payment:"[39m[33m,[39m dbError)[33m;[39m[0m

      at warn (routes/payments.js:1163:19)

  console.log
    Creating Stripe PaymentIntent with data: {
      amount: 5000,
      currency: 'gbp',
      description: 'ClubHub Payment of Â£50'
    }

      at log (routes/payments.js:1205:15)

  console.log
    Stripe Payment Intent created: pi_test for Â£50

      at log (routes/payments.js:1214:15)

  console.log
    2026-02-09T21:04:45.224Z - GET /api/payments/stripe/connect/status - ::ffff:127.0.0.1

      at log (server.js:186:11)

  console.log
    âœ… Token verified for user: super@test.com

      at log (middleware/auth.js:56:13)

  console.error
    Stripe Connect account error: Error: User not found
        at getOrCreateStripeConnectAccount (C:\Users\Dell\Documents\elitepro\clubhub\backend\routes\payments.js:52:45)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at C:\Users\Dell\Documents\elitepro\clubhub\backend\routes\payments.js:130:21

    [0m [90m 110 |[39m     [36mreturn[39m account[33m;[39m
     [90m 111 |[39m   } [36mcatch[39m (err) {
    [31m[1m>[22m[39m[90m 112 |[39m     console[33m.[39merror([32m"Stripe Connect account error:"[39m[33m,[39m err)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 113 |[39m
     [90m 114 |[39m     [90m// Handle specific Stripe errors[39m
     [90m 115 |[39m     [36mif[39m (err[33m.[39mtype [33m===[39m [32m"StripeInvalidRequestError"[39m) {[0m

      at error (routes/payments.js:112:13)
      at routes/payments.js:130:21

  console.error
    Stripe connect status error: Error: User not found
        at getOrCreateStripeConnectAccount (C:\Users\Dell\Documents\elitepro\clubhub\backend\routes\payments.js:52:45)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at C:\Users\Dell\Documents\elitepro\clubhub\backend\routes\payments.js:130:21

    [0m [90m 208 |[39m     res[33m.[39mjson(response)[33m;[39m
     [90m 209 |[39m   } [36mcatch[39m (err) {
    [31m[1m>[22m[39m[90m 210 |[39m     console[33m.[39merror([32m"Stripe connect status error:"[39m[33m,[39m err)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 211 |[39m     [36mif[39m ([33mString[39m(err[33m.[39mmessage)[33m.[39mincludes([32m"User not found"[39m)) {
     [90m 212 |[39m       [36mreturn[39m res[33m.[39mstatus([35m404[39m)[33m.[39mjson({ error[33m:[39m [32m"User not found"[39m })[33m;[39m
     [90m 213 |[39m     }[0m

      at error (routes/payments.js:210:13)

  console.log
    2026-02-09T21:04:45.253Z - POST /api/payments/plans - ::ffff:127.0.0.1

      at log (server.js:186:11)

  console.log
    âœ… Token verified for user: super@test.com

      at log (middleware/auth.js:56:13)

FAIL tests/stripe-connect-safety.test.js
  ğŸ›¡ï¸ STRIPE CONNECT SAFETY TESTS
    âœ… Stripe Connect Account Linking
      Ã— should fetch connect status WITHOUT charging (107 ms)
      Ã— should NOT expose payment processing endpoints (Safety Check) (30 ms)
    âœ… Payment Plan Management (No Charging)
      âˆš should create payment plan WITHOUT charging cards (22 ms)
    ğŸ”´ CRITICAL: Payment Processing Blocked
      Ã— should block payment intent creation when flag is false (23 ms)
    ğŸ” Stripe API Call Verification
      âˆš should NEVER call stripe.paymentIntents.create during normal operations (47 ms)

  â— ğŸ›¡ï¸ STRIPE CONNECT SAFETY TESTS â€º âœ… Stripe Connect Account Linking â€º should fetch connect status WITHOUT charging

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

    [0m [90m 126 |[39m         [33m.[39m[36mset[39m([32m"Authorization"[39m[33m,[39m [32m`Bearer ${token}`[39m)[33m;[39m
     [90m 127 |[39m
    [31m[1m>[22m[39m[90m 128 |[39m       expect(res[33m.[39mstatusCode)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 129 |[39m       [90m// Verify NO payment methods were called[39m
     [90m 130 |[39m       expect(mockStripe[33m.[39mpaymentIntents[33m.[39mcreate)[33m.[39mnot[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m 131 |[39m       expect(mockStripe[33m.[39mcharges[33m.[39mcreate)[33m.[39mnot[33m.[39mtoHaveBeenCalled()[33m;[39m[0m

      at Object.toBe (tests/stripe-connect-safety.test.js:128:30)

  â— ğŸ›¡ï¸ STRIPE CONNECT SAFETY TESTS â€º âœ… Stripe Connect Account Linking â€º should NOT expose payment processing endpoints (Safety Check)

    expect(received).toBe(expected) // Object.is equality

    Expected: 403
    Received: 200

    [0m [90m 141 |[39m         [33m.[39msend({ amount[33m:[39m [35m100[39m })[33m;[39m
     [90m 142 |[39m
    [31m[1m>[22m[39m[90m 143 |[39m       expect(res[33m.[39mstatusCode)[33m.[39mtoBe([35m403[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 144 |[39m       expect(mockStripe[33m.[39mpaymentIntents[33m.[39mcreate)[33m.[39mnot[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m 145 |[39m     })[33m;[39m
     [90m 146 |[39m   })[33m;[39m[0m

      at Object.toBe (tests/stripe-connect-safety.test.js:143:30)

  â— ğŸ›¡ï¸ STRIPE CONNECT SAFETY TESTS â€º ğŸ”´ CRITICAL: Payment Processing Blocked â€º should block payment intent creation when flag is false

    expect(received).toBe(expected) // Object.is equality

    Expected: 403
    Received: 200

    [0m [90m 181 |[39m         })[33m;[39m
     [90m 182 |[39m
    [31m[1m>[22m[39m[90m 183 |[39m       expect(res[33m.[39mstatusCode)[33m.[39mtoBe([35m403[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 184 |[39m       expect(mockStripe[33m.[39mpaymentIntents[33m.[39mcreate)[33m.[39mnot[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m 185 |[39m     })[33m;[39m
     [90m 186 |[39m   })[33m;[39m[0m

      at Object.toBe (tests/stripe-connect-safety.test.js:183:30)

Test Suites: 1 failed, 1 total
Tests:       3 failed, 2 passed, 5 total
Snapshots:   0 total
Time:        1.271 s, estimated 2 s
Ran all test suites matching tests/stripe-connect-safety.test.js.
